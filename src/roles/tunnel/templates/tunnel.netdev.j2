{% import 'macros.j2' as macros %}

{% if "match" in tunnel -%}
{% set m=tunnel.match %}
[Match]
  {% if "system" in m -%}
{{ macros.generate_mapped_arguments(match_system_arguments, m.system) }}
  {% endif %}
{% endif %}

[NetDev]
Name={{ tunnel.name }}
Kind={{ tunnel.kind }}
{% if "netdev" in tunnel -%}
{{ macros.generate_mapped_arguments(netdev_arguments, tunnel.netdev) }}
{% endif %}

{% if "network" in network -%}
[Tunnel]
{{ macros.generate_mapped_arguments(tunnel_arguments, tunnel.tunnel) }}
{% endif %}
